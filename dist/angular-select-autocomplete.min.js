!function(){"use strict";angular.module("selectAutocomplete",["selectItems","openDropdown"])}(),function(){"use strict";function e(e,l){return{replace:!0,restrict:"E",require:["^ngModel","^selectOptions"],template:function(e,l){var o="select_autocomplete_"+t()+"_"+t()+"_"+t(),s=e.html().trim();return['<div class="select-dropdown" ng-class="{ \'disabled\': '+o+'.isDisabled }" data-id="'+o+'">','<input id="'+o+'" style="display: block"','class="select-autocomplete-input"','ng-model="'+o+'.userInputText"','ng-change="'+o+'.change()"',"ng-class=\"{'opened': "+o+".isOpened, 'closed': !"+o+'.isOpened}">','<open-dropdown class="open-dropdown" ','disabled="'+l.disabled+'"','tabindex="3" ','for="'+o+'" ','is-opened="'+o+'.isOpened">','<select-items class="select-items"','multiselect="false"','hide-no-selection="true"','hide-controls="true"','search-keyword="'+o+'.userInputText"','select-options="'+l.selectOptions+'"','ng-model="'+l.ngModel+'"',l.onChange?'on-change="'+l.onChange+'"':"",l.dropdownShowLimit?'show-limit="'+l.dropdownShowLimit+'"':"",l.search?'search="'+l.search+'"':"",l.searchFilter?'search-filter="'+l.searchFilter+'"':"",l.autoSelect?'auto-select="'+l.autoSelect+'"':"",l.selectAll?'select-all="'+l.selectAll+'"':"",l.groupSelectAll?'group-select-all="'+l.groupSelectAll+'"':"",l.searchPlaceholder?'search-placeholder="'+l.searchPlaceholder+'"':"",l.selectAllLabel?'select-all-label="'+l.selectAllLabel+'"':"",l.deselectAllLabel?'deselect-all-label="'+l.deselectAllLabel+'"':"",l.noSelectionLabel?'no-selection-label="'+l.noSelectionLabel+'"':"",l.loadingLabel?'loading-label="'+l.loadingLabel+'"':"",l.loadPromise?'load-promise="('+o+".isOpenedForFirstTime || !"+l.lazyLoad+") ? "+l.loadPromise+' : null "':"",l.loadByKeywordPromise?'load-by-keyword-promise="'+l.loadByKeywordPromise+'"':"",l.loadByKeywordDelay?'load-by-keyword-delay="'+l.loadByKeywordDelay+'"':"",l.loadByKeywordMinQueryLength?'load-by-keyword-min-query-length="'+l.loadByKeywordMinQueryLength+'"':"",l.filters?'filters="'+l.filters+'"':"",l.dropdownItemDecorator?'decorator="'+l.dropdownItemDecorator+'"':"",l.dropdownGroupDecorator?'group-decorator="'+l.dropdownGroupDecorator+'"':"",">"+s+"</select-items></open-dropdown></div>"].join("")},link:function(t,o,s,a){var n=a[0],r=a[1],i=angular.element(o).attr("data-id");t[i]={userInputText:"",isOpened:!1,isOpenedForFirstTime:!1,isDisabled:e(s.disabled)(t)};var d=o[0].getElementsByClassName("select-items")[0],c=angular.element(d).controller("selectItems"),u=function(){return s.disabled?e(s.disabled)(t):!1},p=function(e){if(!u()){switch(e.keyCode){case 38:e.preventDefault(),t[i].isOpened=!0,t.$broadcast("select-items.active_next");break;case 40:e.preventDefault(),t.$broadcast("select-items.active_previous");break;case 13:if(t[i].isOpened){var l=c.selectActive();if(l===!0)return e.stopPropagation(),t[i].isOpened=!1,void t.$digest()}break;case 27:return t[i].isOpened=!1,void t.$digest()}t[i].isOpened=!0,t.$digest()}};t.getItemName=function(e){var l=r.parseItemValueFromSelection(e);return t.decorator?t.decorator(e):l},t.$watch(s.disabled,function(e){t[i].isDisabled=e}),t.$watch(i+".isOpened",function(e){t[i].isOpenedForFirstTime===!1&&e===!0&&(t[i].isOpenedForFirstTime=!0)}),o[0].addEventListener("keydown",p),t.$on("select-items.item_selected",function(e,l){l.element===d&&(t[i].userInputText=t.getItemName(l.item),t[i].isOpened=!1)}),t[i].change=function(){var e=r.createItem(t[i].userInputText);n.$setViewValue(e),s.onChange&&l(function(){r.applyOnScope(s.onChange)})}}}}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}angular.module("selectAutocomplete").directive("selectAutocomplete",e),e.$inject=["$parse","$timeout"]}();